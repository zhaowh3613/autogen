"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[9144],{63098:(e,c,n)=>{n.r(c),n.d(c,{assets:()=>r,contentTitle:()=>i,default:()=>l,frontMatter:()=>a,metadata:()=>o,toc:()=>h});var s=n(85893),t=n(11151);const a={},i="LLM Caching",o={id:"topics/llm-caching",title:"LLM Caching",description:"Since version 0.2.8, a configurable context manager allows you to easily",source:"@site/docs/topics/llm-caching.md",sourceDirName:"topics",slug:"/topics/llm-caching",permalink:"/autogen/docs/topics/llm-caching",draft:!1,unlisted:!1,editUrl:"https://github.com/microsoft/autogen/edit/main/website/docs/topics/llm-caching.md",tags:[],version:"current",frontMatter:{},sidebar:"docsSidebar",previous:{title:"Jupyter Code Executor",permalink:"/autogen/docs/topics/code-execution/jupyter-code-executor"},next:{title:"LLM Configuration",permalink:"/autogen/docs/topics/llm_configuration"}},r={},h=[];function d(e){const c={a:"a",code:"code",h1:"h1",p:"p",pre:"pre",...(0,t.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.h1,{id:"llm-caching",children:"LLM Caching"}),"\n",(0,s.jsxs)(c.p,{children:["Since version ",(0,s.jsx)(c.a,{href:"https://github.com/microsoft/autogen/releases/tag/v0.2.8",children:(0,s.jsx)(c.code,{children:"0.2.8"})}),", a configurable context manager allows you to easily\nconfigure LLM cache, using either ",(0,s.jsx)(c.a,{href:"/docs/reference/cache/disk_cache#diskcache",children:(0,s.jsx)(c.code,{children:"DiskCache"})})," or ",(0,s.jsx)(c.a,{href:"/docs/reference/cache/redis_cache#rediscache",children:(0,s.jsx)(c.code,{children:"RedisCache"})}),". All agents inside the\ncontext manager will use the same cache."]}),"\n",(0,s.jsx)(c.pre,{children:(0,s.jsx)(c.code,{className:"language-python",children:'from autogen import Cache\n\n# Use Redis as cache\nwith Cache.redis(redis_url="redis://localhost:6379/0") as cache:\n    user.initiate_chat(assistant, message=coding_task, cache=cache)\n\n# Use DiskCache as cache\nwith Cache.disk() as cache:\n    user.initiate_chat(assistant, message=coding_task, cache=cache)\n'})}),"\n",(0,s.jsxs)(c.p,{children:["You can vary the ",(0,s.jsx)(c.code,{children:"cache_seed"})," parameter to get different LLM output while\nstill using cache."]}),"\n",(0,s.jsx)(c.pre,{children:(0,s.jsx)(c.code,{className:"language-python",children:"# Setting the cache_seed to 1 will use a different cache from the default one\n# and you will see different output.\nwith Cache.disk(cache_seed=1) as cache:\n    user.initiate_chat(assistant, message=coding_task, cache=cache)\n"})}),"\n",(0,s.jsxs)(c.p,{children:["By default ",(0,s.jsx)(c.a,{href:"/docs/reference/cache/disk_cache#diskcache",children:(0,s.jsx)(c.code,{children:"DiskCache"})})," uses ",(0,s.jsx)(c.code,{children:".cache"})," for storage. To change the cache directory,\nset ",(0,s.jsx)(c.code,{children:"cache_path_root"}),":"]}),"\n",(0,s.jsx)(c.pre,{children:(0,s.jsx)(c.code,{className:"language-python",children:'with Cache.disk(cache_path_root="/tmp/autogen_cache") as cache:\n    user.initiate_chat(assistant, message=coding_task, cache=cache)\n'})}),"\n",(0,s.jsxs)(c.p,{children:["For backward compatibility, ",(0,s.jsx)(c.a,{href:"/docs/reference/cache/disk_cache#diskcache",children:(0,s.jsx)(c.code,{children:"DiskCache"})})," is on by default with ",(0,s.jsx)(c.code,{children:"cache_seed"})," set to 41.\nTo disable caching completely, set ",(0,s.jsx)(c.code,{children:"cache_seed"})," to ",(0,s.jsx)(c.code,{children:"None"})," in the ",(0,s.jsx)(c.code,{children:"llm_config"})," of the agent."]}),"\n",(0,s.jsx)(c.pre,{children:(0,s.jsx)(c.code,{className:"language-python",children:'assistant = AssistantAgent(\n    "coding_agent",\n    llm_config={\n        "cache_seed": None,\n        "config_list": OAI_CONFIG_LIST,\n        "max_tokens": 1024,\n    },\n)\n'})})]})}function l(e={}){const{wrapper:c}={...(0,t.a)(),...e.components};return c?(0,s.jsx)(c,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},11151:(e,c,n)=>{n.d(c,{Z:()=>o,a:()=>i});var s=n(67294);const t={},a=s.createContext(t);function i(e){const c=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(c):{...c,...e}}),[c,e])}function o(e){let c;return c=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),s.createElement(a.Provider,{value:c},e.children)}}}]);